{"ast":null,"code":"// const urlPrefix = \"https://noa-project-f9caa-default-rtdb.firebaseio.com/\";\nimport { useDispatch } from \"react-redux\";\nexport const FOOD_LIST = \"food_list\";\nexport const INSPIRATION_LIST = \"inspiration_says\";\nconst fetchWrapper = {\n  get: async (name, onfail) => getHandler(name, onfail),\n  fetch: async (method, name, dataToSend, onfail) => putHandler(method, name, dataToSend, onfail),\n  delete: async (method, name, token, onFail) => deleteHandler(method, name, token, onFail)\n};\nconst dispatcg = useDispatch();\n\nasync function getHandler(name, onFail) {\n  try {\n    const response = await fetch(name);\n    console.log(response);\n\n    if (response.statusText === \"Bas request\") {\n      alert(await response.text());\n      throw new Error(await response.text());\n    }\n\n    if (!response.ok) {\n      throw new Error(await response.text());\n    }\n\n    const data = await response.json();\n    console.log(\"fetchWrapper got data, len=\" + Object.keys(data).length);\n    return data;\n  } catch (error) {\n    onFail();\n  }\n}\n\n;\n\nasync function putHandler(method, name, dataToSend, token) {\n  let onFail = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : () => {};\n\n  try {\n    const requestOptions = {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        token: token\n      },\n      body: JSON.stringify(dataToSend)\n    };\n    const response = await fetch(name, requestOptions);\n\n    if (!response.ok) {\n      alert(await response.text());\n      throw new Error(await response.text());\n    }\n\n    const data = await response.json();\n    console.log(\"fetchWrapper.\" + method + \", \" + name + \" got data, len=\" + Object.keys(data).length);\n    return JSON.stringify(data);\n  } catch (error) {\n    onFail();\n  }\n}\n\n;\n\nasync function deleteHandler(method, name, token) {\n  let onFail = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : () => {};\n\n  try {\n    const requestOptions = {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        token: token\n      }\n    };\n    const response = await fetch(name, requestOptions);\n\n    if (response.statusText === \"Bad request\") {\n      alert(await response.text());\n      throw new Error(await response.text());\n    } else if (!response.ok) {\n      alert(await response.text());\n      throw new Error(await response.text());\n    }\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    onFail();\n  }\n}\n\n;\nexport default fetchWrapper;","map":{"version":3,"sources":["C:/Users/noada/eclipse-workspace/CouponSystemSpring/src/main/react/src/helper/fetchWrapper.js"],"names":["useDispatch","FOOD_LIST","INSPIRATION_LIST","fetchWrapper","get","name","onfail","getHandler","fetch","method","dataToSend","putHandler","delete","token","onFail","deleteHandler","dispatcg","response","console","log","statusText","alert","text","Error","ok","data","json","Object","keys","length","error","requestOptions","headers","body","JSON","stringify"],"mappings":"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","sourcesContent":["\r\n// const urlPrefix = \"https://noa-project-f9caa-default-rtdb.firebaseio.com/\";\r\n\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nexport const FOOD_LIST = \"food_list\";\r\nexport const INSPIRATION_LIST = \"inspiration_says\";\r\n\r\nconst fetchWrapper = {\r\n  get: async (name, onfail)=> getHandler(name, onfail),\r\n  fetch: async (method, name, dataToSend, onfail)=> putHandler(method, name, dataToSend, onfail),\r\n  delete: async (method, name, token, onFail)=>deleteHandler(method, name, token, onFail)\r\n}\r\n \r\nconst dispatcg= useDispatch();\r\n\r\nasync function getHandler(name, onFail)\r\n{\r\n  try {\r\n    const response = await fetch(name);\r\n    console.log(response)\r\n\r\n    if (response.statusText === \"Bas request\") {\r\n      alert(await response.text());\r\n      \r\n      throw new Error(await response.text());\r\n    } \r\n    if (!response.ok) {\r\n      throw new Error(await response.text());\r\n    }\r\n    const data = await response.json();\r\n    console.log(\"fetchWrapper got data, len=\" + Object.keys(data).length);\r\n    return data;\r\n  } catch (error) {\r\n    onFail();\r\n  }\r\n};\r\n\r\nasync function putHandler(method, name, dataToSend, token, onFail=()=>{})\r\n{\r\n  try {\r\n    const requestOptions = {\r\n      method: method,\r\n      headers: { \"Content-Type\": \"application/json\",  token: token},\r\n      body: JSON.stringify(dataToSend)\r\n    };\r\n    const response = await fetch(name, requestOptions);\r\n\r\n    if (!response.ok) {\r\n      alert(await response.text())\r\n      throw new Error(await response.text());\r\n    }\r\n    const data = await response.json();\r\n    console.log(\"fetchWrapper.\"+method+\", \"+name+\" got data, len=\" + Object.keys(data).length);\r\n    return JSON.stringify(data);\r\n  } catch (error) {\r\n    onFail();\r\n  }\r\n};\r\n\r\nasync function deleteHandler(method, name, token, onFail=()=>{})\r\n{\r\n  try {\r\n    const requestOptions = {\r\n      method: method,\r\n      headers: { \"Content-Type\": \"application/json\",  token: token}\r\n    };\r\n    const response = await fetch(name, requestOptions);\r\n    if (response.statusText === \"Bad request\") {\r\n      alert(await response.text())\r\n      throw new Error(await response.text());\r\n     }\r\n    else if (!response.ok) {\r\n      alert(await response.text())\r\n      throw new Error(await response.text());\r\n    }\r\n    const data = await response.json();\r\n    return data;\r\n  } catch (error) {\r\n    onFail();\r\n  }\r\n};\r\n\r\nexport default fetchWrapper;"]},"metadata":{},"sourceType":"module"}