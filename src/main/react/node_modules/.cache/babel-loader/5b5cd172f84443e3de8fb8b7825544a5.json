{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\noada\\\\eclipse-workspace\\\\CouponSystemSpring\\\\src\\\\main\\\\react\\\\src\\\\components\\\\Client\\\\Client.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useSelector } from 'react-redux';\nimport fetchWrapper from '../../helper/fetchWrapper';\nimport classes from \"./Client.module.css\";\nimport CardClient from \"../../UI/CardClient\";\nimport ClientForm from \"./ClientForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Client = props => {\n  _s();\n\n  const userType = useSelector(state => state.auth.userType);\n  const token = useSelector(state => state.auth.token);\n  const [client, setClient] = useState();\n  const [error, setError] = useState(null);\n  const [isAvailClient, setAvailClient] = useState(true);\n  const [edit, setEdit] = useState(false);\n\n  let content = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"cant show user details\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 17\n  }, this);\n\n  if (props.client != []) {\n    if (userType === \"admin\") {\n      content = /*#__PURE__*/_jsxDEV(CardClient, {\n        client: props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 17\n      }, this);\n    } // else {\n    //   content = <CardClient client={props.client} />\n    // }\n\n  }\n\n  const deleteClient = useCallback(async event => {\n    event.preventDefault();\n    setError(null);\n    let method = \"DELETE\";\n    let path = \"admin/delete/\" + props.clientType + \"/\" + props.id;\n\n    try {\n      const data = await fetchWrapper.delete(method, path, token, () => {\n        console.log(data);\n      });\n      setAvailClient(false);\n    } catch (Error) {}\n  }, []);\n\n  const deleteChangeHandler = event => {\n    if (window.confirm(\"are you sure you want to delete this client?\")) {\n      deleteClient(event);\n    }\n  };\n\n  const updateChangeHandler = () => {\n    console.log(\"aaaa\");\n    setEdit(true);\n  };\n\n  const onCancel = () => {\n    setEdit(false);\n  };\n\n  const onSave = props => {\n    setEdit(false);\n  };\n\n  if (edit) {\n    content = /*#__PURE__*/_jsxDEV(ClientForm, {\n      defaultData: props,\n      requestClient: props.clientType,\n      onCancel: onCancel,\n      onSave: onSave\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 15\n    }, this);\n  }\n\n  if (error) {\n    /*#__PURE__*/\n    _jsxDEV(\"section\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: isAvailClient && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.client,\n      children: [content, userType === \"admin\" && !edit && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: updateChangeHandler,\n        children: \"update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 43\n      }, this), userType === \"admin\" && !edit && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: deleteChangeHandler,\n        children: \"delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 43\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Client, \"zca52OK35IR08VKa2LpGDHoLD38=\", false, function () {\n  return [useSelector, useSelector];\n});\n\n_c = Client;\nexport default Client;\n\nvar _c;\n\n$RefreshReg$(_c, \"Client\");","map":{"version":3,"sources":["C:/Users/noada/eclipse-workspace/CouponSystemSpring/src/main/react/src/components/Client/Client.js"],"names":["React","useCallback","useEffect","useState","useSelector","fetchWrapper","classes","CardClient","ClientForm","Client","props","userType","state","auth","token","client","setClient","error","setError","isAvailClient","setAvailClient","edit","setEdit","content","deleteClient","event","preventDefault","method","path","clientType","id","data","delete","console","log","Error","deleteChangeHandler","window","confirm","updateChangeHandler","onCancel","onSave"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport fetchWrapper from '../../helper/fetchWrapper'\r\n\r\nimport classes from \"./Client.module.css\"\r\nimport CardClient from \"../../UI/CardClient\"\r\nimport ClientForm from \"./ClientForm\";\r\n\r\nconst Client = (props) => {\r\n  \r\n  const userType = useSelector(state => state.auth.userType);\r\n  const token = useSelector((state) => state.auth.token);\r\n\r\n  const [client,setClient]= useState();\r\n  const [error, setError] = useState(null);\r\n  const [isAvailClient, setAvailClient] = useState(true);\r\n  const [edit, setEdit] = useState(false);\r\n\r\n  let content = <div>cant show user details</div>\r\n\r\n  if (props.client != []) {\r\n    if (userType === \"admin\") {\r\n      content = <CardClient client={props} />\r\n    }\r\n    // else {\r\n    //   content = <CardClient client={props.client} />\r\n    // }\r\n  }\r\n\r\n  const deleteClient = useCallback(async (event) => {\r\n    event.preventDefault();\r\n    setError(null);\r\n    let method = \"DELETE\";\r\n    let path = \"admin/delete/\" + props.clientType + \"/\" + props.id;\r\n    try {\r\n        const data = await fetchWrapper.delete(method, path, token, () => {\r\n          console.log(data)\r\n      })\r\n      setAvailClient(false);\r\n     \r\n    } catch (Error) {\r\n      \r\n    }\r\n  }, []);\r\n\r\n  const deleteChangeHandler = (event) => {\r\n    if (window.confirm(\"are you sure you want to delete this client?\")) {\r\n      deleteClient(event);\r\n    }\r\n  }\r\n\r\n  const updateChangeHandler = () => {\r\n    console.log(\"aaaa\")\r\n    setEdit(true);\r\n  }\r\n\r\n  const onCancel = () => {\r\n    setEdit(false);\r\n\r\n  }\r\n  const onSave = (props) => {\r\n    setEdit(false);\r\n  }\r\n\r\n  if (edit) {\r\n    content = <ClientForm defaultData={props} requestClient={props.clientType} onCancel={onCancel} onSave={onSave} />\r\n  \r\n  }\r\n  \r\n  if (error){\r\n    <section>\r\n      {error}\r\n    </section>\r\n  }\r\n  \r\n  return (\r\n    <React.Fragment>\r\n      {isAvailClient && <div className={classes.client}>\r\n        {content}\r\n        {userType === \"admin\" && !edit && <button onClick={updateChangeHandler}>update</button>}\r\n        {userType === \"admin\" && !edit && <button onClick={deleteChangeHandler}>delete</button>}\r\n      </div>}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default Client; "]},"metadata":{},"sourceType":"module"}