{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\noada\\\\eclipse-workspace\\\\CouponSystemSpring\\\\src\\\\main\\\\react\\\\src\\\\components\\\\Coupon\\\\CreateCoupon.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useCallback, useRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport Select from \"react-select\";\nimport classes from './CreateCoupon.module.css';\nimport fetchWrapper from '../../helper/fetchWrapper';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CreateCoupon(props) {\n  _s();\n\n  const token = useSelector(state => state.auth.token);\n  const userType = useSelector(state => state.auth.userType);\n  const titleRef = useRef(\"\");\n  const descriptionRef = useRef(\"\");\n  const releaseDateRef = useRef(\"\");\n  const [releaseDateState, setRelealseDate] = useState(\"\");\n  const expiredDateRef = useRef(\"\");\n  const categoryRef = useRef(\"\");\n  const amountRef = useRef(\"\");\n  const priceRef = useRef(\"\");\n  const imageRef = useRef(\"\");\n  const [imageLoadState, setImageLoad] = useState(\"\");\n  const categories = [{\n    value: \"food\",\n    label: \"Food\"\n  }, {\n    value: \"electricity\",\n    label: \"Electricity\"\n  }, {\n    value: \"restaurant\",\n    label: \"Restaurant\"\n  }, {\n    value: \"vacation\",\n    label: \"Vacation\"\n  }];\n  let required = true;\n  const todayDate = new Date().toISOString().substring(0, 10);\n  const submitHandler = useCallback(async event => {\n    event.preventDefault();\n    const couponToSend = {\n      title: titleRef.current.value,\n      description: descriptionRef.current.value,\n      category: categoryRef.current.state.selectValue[0].label,\n      startDate: releaseDateState,\n      endDate: expiredDateRef.current.value,\n      amount: amountRef.current.value,\n      price: priceRef.current.value,\n      image: imageRef.current.value\n    };\n    console.log(couponToSend);\n    const method = \"POST\";\n    const path = \"/\" + userType + \"/add\";\n\n    try {\n      const data = await fetchWrapper.fetch(method, path, couponToSend, token, () => {\n        console.log(\"error\");\n      });\n      event.res;\n    } catch (error) {\n      console.log(error.message);\n    } //setIsLoading(false);\n\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitHandler,\n      className: classes.control,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"title\",\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"title\",\n          ref: titleRef,\n          required: required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"description\",\n          children: \"Coupon description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"description\",\n          rows: \"3\",\n          ref: descriptionRef,\n          required: required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"releaseDate\",\n          children: \"Release Date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"releaseDate\",\n          type: \"date\",\n          min: todayDate,\n          ref: releaseDateRef,\n          onChange: e => setRelealseDate(e.target.value),\n          required: {\n            required\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"expiredDate\",\n          children: \"Expired Date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"expiredDate\",\n          type: \"date\",\n          min: releaseDateState,\n          ref: expiredDateRef,\n          required: required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"select\",\n          children: \"Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          id: \"select\",\n          options: categories,\n          ref: categoryRef,\n          required: required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"price\",\n          children: \"price\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"price\",\n          type: \"number\",\n          min: \"1\",\n          step: \"0.01\",\n          ref: priceRef,\n          required: required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"amount\",\n          children: \"Amount of available coupons\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          min: \"1\",\n          step: \"1\",\n          id: \"amount\",\n          ref: amountRef,\n          required: required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes['control-image'],\n          onChange: e => setImageLoad(e.target.value),\n          required: required,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"imageLoad\",\n            children: \"Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              value: \"URL\",\n              name: \"imageLoad\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 16\n            }, this), \"URL\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              value: \"File\",\n              name: \"imageLoad\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 16\n            }, this), \"File\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 9\n        }, this), imageLoadState === \"URL\" && /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"url\",\n          id: \"image\",\n          ref: imageRef,\n          required: required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 38\n        }, this), imageLoadState === \"File\" && /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"image\",\n          ref: imageRef,\n          required: required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 39\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Add Coupon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n} // {ReactDOM.createPortal(<Popup show={showPopup} popuptext=\"wrong movie details!\"/>\n// , document.getElementById(\"popup-place-holder\"))}\n\n\n_s(CreateCoupon, \"gXyI52uhCgUVCP7conqOH6XP+PE=\", false, function () {\n  return [useSelector, useSelector];\n});\n\n_c = CreateCoupon;\nexport default CreateCoupon;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateCoupon\");","map":{"version":3,"sources":["C:/Users/noada/eclipse-workspace/CouponSystemSpring/src/main/react/src/components/Coupon/CreateCoupon.js"],"names":["React","Fragment","useCallback","useRef","useState","useSelector","Select","classes","fetchWrapper","CreateCoupon","props","token","state","auth","userType","titleRef","descriptionRef","releaseDateRef","releaseDateState","setRelealseDate","expiredDateRef","categoryRef","amountRef","priceRef","imageRef","imageLoadState","setImageLoad","categories","value","label","required","todayDate","Date","toISOString","substring","submitHandler","event","preventDefault","couponToSend","title","current","description","category","selectValue","startDate","endDate","amount","price","image","console","log","method","path","data","fetch","res","error","message","control","e","target"],"mappings":"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","sourcesContent":["import React, { Fragment, useCallback, useRef, useState } from \"react\";\r\n\r\nimport { useSelector } from \"react-redux\";\r\nimport Select from \"react-select\";\r\n\r\nimport classes from './CreateCoupon.module.css';\r\nimport fetchWrapper from '../../helper/fetchWrapper'\r\n\r\nfunction CreateCoupon(props) {\r\n\r\n  const token = useSelector((state) => state.auth.token);\r\n  const userType= useSelector ((state) => state.auth.userType);\r\n  const titleRef = useRef(\"\");\r\n  const descriptionRef = useRef(\"\");\r\n  const releaseDateRef= useRef(\"\");\r\n  const [releaseDateState, setRelealseDate] = useState(\"\");\r\n  const expiredDateRef = useRef(\"\");\r\n  const categoryRef = useRef(\"\");\r\n  const amountRef = useRef(\"\");\r\n  const priceRef = useRef(\"\");\r\n  const imageRef = useRef(\"\");\r\n  const [imageLoadState, setImageLoad] = useState(\"\");\r\n\r\n  const categories = [\r\n    { value: \"food\", label: \"Food\" },\r\n    { value: \"electricity\", label: \"Electricity\" },\r\n    { value: \"restaurant\", label: \"Restaurant\" },\r\n    { value: \"vacation\", label: \"Vacation\" },\r\n  ];\r\n\r\n  let required = true;\r\n  const todayDate = new Date().toISOString().substring(0, 10);\r\n\r\n  const submitHandler = useCallback(async (event) => {\r\n    event.preventDefault();\r\n\r\n    const couponToSend = {\r\n      title: titleRef.current.value,\r\n      description: descriptionRef.current.value,\r\n      category: categoryRef.current.state.selectValue[0].label,\r\n      startDate: releaseDateState,\r\n      endDate: expiredDateRef.current.value,\r\n      amount: amountRef.current.value,\r\n      price: priceRef.current.value,\r\n      image: imageRef.current.value,\r\n    };\r\n\r\n    console.log(couponToSend);\r\n    const method = \"POST\";\r\n    const path=\"/\"+userType+\"/add\";\r\n    \r\n    try {\r\n      const data = await fetchWrapper.fetch(method, path, couponToSend, token, () => {\r\n        console.log(\"error\");\r\n    })\r\n    event.res\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n    //setIsLoading(false);\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <section>\r\n    <form onSubmit={submitHandler} className={classes.control} >\r\n      <div >\r\n        <label htmlFor=\"title\">Title</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"title\"\r\n          ref={titleRef}\r\n          required={required}\r\n        />\r\n      </div>\r\n      <div >\r\n        <label htmlFor=\"description\">Coupon description</label>\r\n        <textarea\r\n          id=\"description\"\r\n          rows=\"3\"\r\n          ref={descriptionRef}\r\n          required={required} />\r\n      </div>\r\n      <div >\r\n        <label htmlFor=\"releaseDate\">Release Date</label>\r\n        <input\r\n          id=\"releaseDate\"\r\n          type=\"date\"\r\n          min={todayDate}\r\n          ref= {releaseDateRef}\r\n          onChange={e => setRelealseDate(e.target.value)}\r\n          required={{ required }} />\r\n      </div>\r\n      <div >\r\n        <label htmlFor=\"expiredDate\">Expired Date</label>\r\n        <input\r\n          id=\"expiredDate\"\r\n          type=\"date\"\r\n          min={releaseDateState}\r\n          ref={expiredDateRef}\r\n          required={required} />\r\n      </div>\r\n      <div >\r\n        <label htmlFor=\"select\">Category</label>\r\n        <Select\r\n          id=\"select\"\r\n          options={categories}\r\n          ref={categoryRef}\r\n          required={required}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label htmlFor=\"price\">price</label>\r\n        <input\r\n          id=\"price\"\r\n          type=\"number\"\r\n          min=\"1\"\r\n          step=\"0.01\"\r\n          ref={priceRef}\r\n          required={required} />\r\n      </div>\r\n      <div>\r\n        <label htmlFor=\"amount\">Amount of available coupons</label>\r\n        <input\r\n          type=\"number\"\r\n          min=\"1\"\r\n          step=\"1\"\r\n          id=\"amount\"\r\n          ref={amountRef}\r\n          required={required} />\r\n      </div>\r\n      <div >\r\n        <div className={classes['control-image']} onChange={e => setImageLoad(e.target.value)} required={required}>\r\n          <label htmlFor=\"imageLoad\">Image</label>\r\n          <div><input type=\"radio\" value=\"URL\" name=\"imageLoad\" />URL</div>\r\n          <div><input type=\"radio\" value=\"File\" name=\"imageLoad\" />File</div>\r\n        </div>\r\n        {imageLoadState === \"URL\" && <input type=\"url\" id=\"image\" ref={imageRef} required={required} />}\r\n        {imageLoadState === \"File\" && <input type=\"file\" id=\"image\" ref={imageRef} required={required} />}\r\n      </div>\r\n      <button type=\"submit\">Add Coupon</button>\r\n    </form>\r\n    </section>\r\n  );\r\n}\r\n\r\n// {ReactDOM.createPortal(<Popup show={showPopup} popuptext=\"wrong movie details!\"/>\r\n// , document.getElementById(\"popup-place-holder\"))}\r\n\r\nexport default CreateCoupon;\r\n"]},"metadata":{},"sourceType":"module"}