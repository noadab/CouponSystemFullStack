{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\noada\\\\eclipse-workspace\\\\CouponSystemSpring\\\\src\\\\main\\\\react\\\\src\\\\components\\\\Coupon\\\\CouponFetch.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { authActions } from \"../../store/auth\";\nimport fetchWrapper from '../../helper/fetchWrapper';\nimport CouponList from './CouponList';\nimport CouponsFilter from './CouponsFilter';\nimport classes from './CouponList.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CouponFetch = () => {\n  _s();\n\n  const userType = useSelector(state => state.auth.userType);\n  const token = useSelector(state => state.auth.token);\n  const [coupons, setCoupons] = useState([]);\n  const [isCouponsFetch, setIsCouponsFetch] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const fetchCouponsHandler = useCallback(async event => {\n    setIsLoading(true);\n    setError(null);\n    let data;\n\n    try {\n      if (event.value != \"No filter\") {\n        data = await fetchWrapper.get(\"/\" + userType + \"/all\" + event.type + \"/\" + event.value + \"/\" + token);\n      } else {\n        data = await fetchWrapper.get(\"/\" + userType + \"/all/\" + token);\n      }\n\n      const transformedCoupons = data.map(couponData => {\n        return {\n          id: couponData.id,\n          title: couponData.title,\n          category: couponData.category,\n          description: couponData.description,\n          startDate: couponData.startDate,\n          endDate: couponData.endDate,\n          amount: couponData.amount,\n          price: couponData.price,\n          image: couponData.image\n        };\n      });\n      setCoupons(transformedCoupons);\n    } catch (error) {\n      console.log(error.message);\n      setError(error.message);\n    }\n\n    setIsCouponsFetch(true);\n    setIsLoading(false);\n  }, []);\n  useEffect(() => {\n    fetchCouponsHandler({\n      value: '',\n      type: ''\n    });\n  }, []);\n\n  let content = /*#__PURE__*/_jsxDEV(\"section\", {\n    children: \"Found no coupons.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 17\n  }, this);\n\n  if (coupons.length > 0) {\n    content = /*#__PURE__*/_jsxDEV(CouponList, {\n      coupons: coupons\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 15\n    }, this);\n  }\n\n  if (error) {\n    content = /*#__PURE__*/_jsxDEV(\"section\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 15\n    }, this);\n  }\n\n  if (isLoading) {\n    content = /*#__PURE__*/_jsxDEV(\"section\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }, this);\n  }\n\n  if (!isCouponsFetch) {\n    content = null;\n  }\n\n  const closeCouponsListHandler = () => {\n    setIsCouponsFetch(false);\n  };\n\n  const openCouponsListHandler = () => {\n    fetchCouponsHandler({\n      value: '',\n      type: ''\n    });\n    setIsCouponsFetch(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [isCouponsFetch && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: closeCouponsListHandler,\n      children: \"Close coupons\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 26\n    }, this), isCouponsFetch && /*#__PURE__*/_jsxDEV(CouponsFilter, {\n      onFilter: fetchCouponsHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 26\n    }, this), !isCouponsFetch && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: openCouponsListHandler,\n      children: \"Fetch coupons\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 27\n    }, this), content != null && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 27\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CouponFetch, \"AZ07Y8rRTwiIRe95EbL5FHz7kSM=\", false, function () {\n  return [useSelector, useSelector];\n});\n\n_c = CouponFetch;\nexport default CouponFetch;\n\nvar _c;\n\n$RefreshReg$(_c, \"CouponFetch\");","map":{"version":3,"sources":["C:/Users/noada/eclipse-workspace/CouponSystemSpring/src/main/react/src/components/Coupon/CouponFetch.js"],"names":["React","useState","useCallback","useEffect","useDispatch","useSelector","authActions","fetchWrapper","CouponList","CouponsFilter","classes","CouponFetch","userType","state","auth","token","coupons","setCoupons","isCouponsFetch","setIsCouponsFetch","isLoading","setIsLoading","error","setError","fetchCouponsHandler","event","data","value","get","type","transformedCoupons","map","couponData","id","title","category","description","startDate","endDate","amount","price","image","console","log","message","content","length","closeCouponsListHandler","openCouponsListHandler"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { authActions } from \"../../store/auth\";\r\n\r\nimport fetchWrapper from '../../helper/fetchWrapper'\r\nimport CouponList from './CouponList'\r\nimport CouponsFilter from './CouponsFilter'\r\nimport classes from './CouponList.module.css'\r\n\r\nconst CouponFetch = () => {\r\n\r\n  const userType = useSelector(state => state.auth.userType);\r\n  const token = useSelector(state => state.auth.token);\r\n\r\n  const [coupons, setCoupons] = useState([]);\r\n  const [isCouponsFetch, setIsCouponsFetch] = useState(false);\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const fetchCouponsHandler = useCallback(async (event) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    let data;\r\n    try {\r\n      if ((event.value) != (\"No filter\")) {\r\n        data = await fetchWrapper.get(\"/\" + userType + \"/all\" + event.type + \"/\" + event.value + \"/\" + token)\r\n      }\r\n      else {\r\n        data = await fetchWrapper.get(\"/\" + userType + \"/all/\" + token)\r\n      }\r\n        const transformedCoupons = data.map((couponData) => {\r\n          return {\r\n            id: couponData.id,\r\n            title: couponData.title,\r\n            category: couponData.category,\r\n            description: couponData.description,\r\n            startDate: couponData.startDate,\r\n            endDate: couponData.endDate,\r\n            amount: couponData.amount,\r\n            price: couponData.price,\r\n            image: couponData.image\r\n          };\r\n        });\r\n        setCoupons(transformedCoupons);\r\n    } catch (error) {\r\n      console.log(error.message);\r\n      setError(error.message);\r\n\r\n    }\r\n    setIsCouponsFetch(true);\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchCouponsHandler({value:'',type:''});\r\n  }, []);\r\n\r\n  let content = <section>Found no coupons.</section>;\r\n\r\n  if (coupons.length > 0) {\r\n    content = <CouponList coupons={coupons} />;\r\n  }\r\n\r\n  if (error) {\r\n    content = <section>{error}</section>;\r\n  }\r\n\r\n  if (isLoading) {\r\n    content = <section>Loading...</section>;\r\n  }\r\n\r\n  if (!isCouponsFetch) {\r\n    content = null;\r\n  }\r\n\r\n  const closeCouponsListHandler = () => {\r\n    setIsCouponsFetch(false);\r\n  }\r\n  const openCouponsListHandler = ()=> {\r\n    fetchCouponsHandler({value:'',type:''});\r\n    setIsCouponsFetch(true);\r\n  }\r\n\r\n  return (\r\n    <div >\r\n      {isCouponsFetch && <button onClick={closeCouponsListHandler} >Close coupons</button>}\r\n      {isCouponsFetch && <CouponsFilter onFilter={fetchCouponsHandler} />}\r\n      {!isCouponsFetch && <button onClick={openCouponsListHandler}>Fetch coupons</button>}\r\n      {content != null && <div>{content}</div>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CouponFetch;"]},"metadata":{},"sourceType":"module"}